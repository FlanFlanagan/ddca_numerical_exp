\documentclass[11pt,letterpaper]{article}
\usepackage[utf8]{inputenc}
\usepackage{caption} % for table captions
\usepackage{amsmath} % for multi-line equations and piecewises
\DeclareMathOperator{\sign}{sign}
\usepackage{graphicx}
\usepackage{relsize}
%\usepackage{textcomp}
\usepackage{xspace}
\usepackage{verbatim} % for block comments
%\usepackage{subfig} % for subfigures
\usepackage{enumitem} % for a) b) c) lists
\newcommand{\Cyclus}{\textsc{Cyclus}\xspace}%
\newcommand{\Cycamore}{\textsc{Cycamore}\xspace}%
\usepackage{tabularx}
\usepackage{color}
\usepackage[acronym,toc]{glossaries}
\include{acros}
\definecolor{bg}{rgb}{0.95,0.95,0.95}
\newcolumntype{b}{X}
\newcolumntype{f}{>{\hsize=.15\hsize}X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcolumntype{m}{>{\hsize=.75\hsize}X}
\newcolumntype{r}{>{\hsize=1.1\hsize}X}
\usepackage{titling}
\usepackage[hang,flushmargin]{footmisc}
\renewcommand*\footnoterule{}
\usepackage[newfloat]{minted}
\newenvironment{code}{\captionsetup{type=listing}}{}
\SetupFloatingEnvironment{listing}{name=Code}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\bibliographystyle{abbrv}
\usepackage{tikz}


\usetikzlibrary{shapes.geometric,arrows}
\tikzstyle{process} = [rectangle, rounded corners, minimum width=1cm, minimum height=1cm,text centered, draw=black, fill=blue!30]
\tikzstyle{arrow} = [thick,->,>=stealth]


\graphicspath{{images/}}
\title{Numerical Experiments for Verifying Demand Driven Deployment Algorithms 
        \\ \vspace{0.5em} Non-Optimizing Algorithm}
\author{Jin Whan Bae, Gwendolyn Chee, Kathryn Huff}


\begin{document}
	\maketitle
	\hrule

\section{Project Objective}
The Demand-Driven Cycamore Archetype project (NEUP-FY16-10512) aims to develop \Cycamore's demand-driven deployment capabilities. The developed algorithm will be in the form of a \Cyclus \texttt{Institution} agent, and will deploy \texttt{Facilities} to meet the front-end and back-end demands of the fuel cycle.

\section{Motivation} 
The current \Cyclus fuel cycle simulation framework relies on the user to define
a deployment scheme or set the supporting \texttt{Facilities} capacities to infinity
to ensure that there's no gap in the nuclear fuel cycle supply chain. These user-defined assumptions 
are not an accurate reflection of the real world. 

\section{Method}
The project objective is met by developing three types of predictive algorithms: non-optimizing, deterministic-optimizing and stochastic-optimizing. Each algorithm aims to improve on the previous 
to provide more accurate prediction results.  

The prediction algorithms are being developed by the team at University of South Carolina. Meanwhile the numerical experiments are being designed by the team at University of Illinois at Urbana-Champaign.

This report will focus on the non-optimizing algorithm. 
It lists capability requirements of the non-optimizing case of the new \Cyclus \texttt{Institution}
for demand-driven deployment of fuel cycle facilities. 
It also discusses the tests to check correct implementation of the capabilities,
using a sample fuel cycle with well-defined facility parameters.

\section{Archetype Requirements}
Subsections \ref{subsection-user} to \ref{subsection-rate} state the requirements that apply to all three predictive algorithms. Expectations for the non-optimizing algorithm are different from expectations for the deterministic-optimizing and stochastic-optimizing algorithms. Therefore, in subsections \ref{subsection-deploy} to \ref{subsection-volatile}, the requirements unique to the non-optimizing algorithm are specified. 

\subsection{User Configuration}
\label{subsection-user}
The archetype should allow the user to define the following parameters: 
\begin{enumerate}
	\item A commodity whose demand drives deployment
	\item Initial amount of that commodity's demand
	\item Rate of growth or decline of that commodity's demand
	\item The facilities in the simulation able to meet that demand
	\item Algorithm type: non-optimizing, deterministic optimizing or stochastic optimizing
\end{enumerate}

\subsection{Create a supply chain}
\label{subsection-supplychain}
The archetype should be able to access the user defined parameters for the facilities in the simulation and evaluate if the commodities supplied by these facilities produce an appropriate supply chain to meet the demand of the commodity whose demand drives deployment. If not, the archetype should inform the user by throwing an error.  

\subsection{Growth Rate}
\label{subsection-rate}
The archetype should give the user options for different types of growth rate curves. Possible examples could be linear, exponential and piece-wise. 

\subsection{Facility Deployment and Decommissioning }
\label{subsection-deploy}
 The non-optimizing algorithm's deployment and decommissioning capabilities should be based on previous demand and supply values. At each time step, the algorithm should evaluate the demand for each commodity against its corresponding supply. If there is a shortage, the algorithm should deploy new facilities. If there is a surplus or more than one facility's capacity, the algorithm should decommission existing facilities. 
 
 \subsection{Dealing with volatility}
 \label{subsection-volatile}
A comprehensive fuel cycle simulator must have predictive capabilities which 
can deploy fuel cycle support facilities intelligently even in the face of 
volatile dynamics. If demand for the deployment-driving commodity is volatile, 
the archetype should recognize this. If it fails, the archetype would pathologically
deploy and decommission the same facility across short time periods due to volatile changes in commodity demand,
which is undesirable. 

\section{Simulation parameters for Test Scenarios}
Simple fuel cycle facilities populate the numerical testing of the algorithm.   

Table \ref{tab:testscenario} provides basic parameters for each test scenario. Table \ref{tab:reactor} provides the parameters for the \texttt{Source}, \texttt{Reactor} and \texttt{Sink} in the test scenarios.

\begin{table}[H]
	\centering
	\caption {Basic Test Parameters}
	\label{tab:testscenario}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Test Scenario Parameters} & \textbf{Value} & \textbf{Units} \\
		\hline
		Duration & 120 & timesteps \\
		Timestep & 1 & month \\
		Start Month & 1 & month \\
		Start Year & 2000 & year \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
    \caption {Source, Reactor and Sink Parameters}
	\label{tab:reactor}
	\begin{tabular}{|l|l|l|}
\hline
\textbf{Source Parameters} & \textbf{Value} & \textbf{Units} \\
\hline
Throughput & 1 & kg \\
Output Commodity & fuel & kg\\
\hline
\textbf{Reactor Parameters} & \textbf{Value} & \textbf{Units} \\
\hline
Cycle Time & 1 & timesteps \\
Refuel Time & 0 & timesteps \\
Lifetime & 1 & timesteps \\
Power Capacity & 1& MWe \\
Assembly Size & 1 & kg \\
\# assemblies per core & 1 & \\
\# assemblies per batch & 1 & \\
Input Commodity & fuel & kg\\
Output Commodity & power & MW\\
\hline
\textbf{Sink Parameters} & \textbf{Value} & \textbf{Units} \\
Throughput & 1 & kg \\
Input Commodity & spent uox & kg\\
\hline
	\end{tabular}
\end{table}

\pagebreak

\section{Numerical Tests for the Non-optimizing prediction method}
The tests are described based on the parameters defined in table \ref{tab:testscenario} and \ref{tab:reactor}. Every test is given facility and catch-up tolerances. Both tolerances are adjustable variables within the test script. Facility tolerance is the percentage difference that is considered acceptable for supply to differ from demand.  Catch-up tolerance is the number of time steps at the start of simulation that is considered acceptable for the supply of a commodity to not be within the acceptable range of it's demand. 

Therefore, each test is considered passed if the supply for every demanded commodity in the test scenario is within the facility tolerance of their demand at every time step, with exception to the initial catch-up tolerance.   

\subsection{Naming Convention for the numerical tests}

The naming convention of the numerical tests are in the form of \texttt{[Alphabet]}-\texttt{[Demand]}-\texttt{[Number]}. Each \texttt{Alphabet} refers to a scenario with a unique combination of \texttt{Facilities} and the commodity that drives deployment. Examples of scenarios that correspond to specific \texttt{Alphabets} is given in table \ref{tab:alphabet}. 
\begin{table}[H]
	\centering
	\caption {An \texttt{Alphabet} corresponding to each test scenario's \texttt{Facilities} and demand-driving commodity combination}
	\label{tab:alphabet}
	\begin{tabular}{|l|l|l|}
		\hline
		\texttt{Alphabet} & \textbf{Facilities in test scenario} & \textbf{\shortstack{Demand-driving \\ commodity}} \\
		\hline
		A & 1. Fresh fuel producing source facility & Fresh fuel \\
		\hline 
		B & \shortstack{1. Fresh fuel producing source facility \\ 2. Reactor facility } & Power \\
		\hline
		C & \shortstack{1. Fresh fuel producing source facility \\ 2. Reactor facility \\ 3. Sink facility } & Power \\
		\hline 
	\end{tabular}
\end{table}

The \texttt{Demand} component refers to the how the demand-driving commodity's demand changes over time. Examples of \texttt{Demand} types are \texttt{Constant}, \texttt{Growth} and \texttt{Decline}. The \texttt{Number} component refers to tests with the same \texttt{Alphabet} and \texttt{Demand}, but with other varying parameters.

\subsection{Numerical Tests}
\subsubsection{Test \texttt{[A]-[Constant]-[1]}}
The purpose of test \texttt{[A]-[Constant]-[1]} is to check if the non-optimizing algorithm works for the simplest scenario where there is only one \texttt{Source} facility available in the simulation to meet the constant demand of the demand-driving commodity: fresh fuel. 



\subsection{Test A-const-2}
In test A-const-2, only a \texttt{source} facility is present in the test scenario. Table \ref{tab:test-A-const-2} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-A-const-2ana} shows the expected analytical solution based on the test scenario.Table \ref{tab:test-A-const-2base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 

\begin{table}[H]
	\centering
	\caption{Test A-const-2 Scenario Input Parameters }
	\label{tab:test-A-const-2}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 2 & kg \\
		Initial facilities & 1 & \#\\
		Growth Rate & 0 & \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-const-2 Analytical Solution}
	\label{tab:test-A-const-2ana}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 & 1\\
		2 to 15& 0 \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-const-2 Base Test Acceptance}
	\label{tab:test-A-const-2base}
	\begin{tabular}{|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}}\\
		\hline
		2 $<$ x $<$ 3 \\
		\hline
	\end{tabular}
\end{table}

\subsection{Test A-grow-1}
In test A-grow-1, only a \texttt{source} facility is present in the test scenario. Table \ref{tab:test-A-grow-1} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-A-grow-1ana} shows the expected analytical solution based on the test scenario. Table \ref{tab:test-A-grow-1base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 

\begin{table}[H]
	\centering
	\caption{Test A-grow-1 Scenario Input Parameters}
	\label{tab:test-A-grow-1}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 0 & \#\\
		Growth Rate & 1 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-grow-1 Analytical Solution}
	\label{tab:test-A-grow-1ana}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 & 2\\
		2 to 12 & 0 \\
		13 & 1 \\
		14 to 15 & 0 \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-grow-1 Base Test Acceptance}
	\label{tab:test-A-grow-1base}
	\begin{tabular}{|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}}\\
		\hline
		3 $<$ x $<$ 4 \\
		\hline
	\end{tabular}
\end{table}

\subsection{Test A-grow-2}
In test A-grow-2, only a \texttt{source} facility is present in the test scenario. Table \ref{tab:test-A-grow-2} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-A-grow-2ana} shows the expected analytical solution based on the test scenario. Table \ref{tab:test-A-grow-2base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 

\begin{table}[H]
	\centering
	\caption{Test A-grow-2 Scenario Input Parameters }
	\label{tab:test-A-grow-2}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 1 & \#\\
		Growth Rate & 1 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-grow-2 Analytical Solution}
	\label{tab:test-A-grow-2ana}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 & 1\\
		2 to 12 & 0 \\
		13 & 1 \\
		14 to 15 & 0 \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-grow-2 Base Test Acceptance}
	\label{tab:test-A-grow-2base}
	\begin{tabular}{|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}}\\
		\hline
		3 $<$ x $<$ 4 \\
		\hline
	\end{tabular}
\end{table}

\subsection{Test B-const-1}
In test B-const-1, both a \texttt{source} and \texttt{reactor} facility is present in the test scenario. Table \ref{tab:test-B-const-1} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-B-const-1ana} shows the expected analytical solution based on the test scenario. Table \ref{tab:test-B-const-1base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 

\begin{table}[H]
	\centering
	\caption{Test B-const-1 Scenario Input Parameters}
	\label{tab:test-B-const-1}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 0 & \#\\
		Growth Rate & 0 &  \\
		\hline
		\textbf{Reactor Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & MW \\
		Initial facilities & 0 & \#\\
		Growth Rate & 0 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-const-1 Analytical Solution}
	\label{tab:test-B-const-1ana}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 & 1 & 1\\
		2 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-const-1 Base Test Acceptance}
	\label{tab:test-B-const-1base}
	\begin{tabular}{|P{6.5cm}|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}} &\textbf{\shortstack{Acceptable total No. of Reactor \\Facilities Deployed + tolerance}}\\
		\hline
		1 $<$ x $<$ 2 & 1 $<$ x $<$ 2\\
		\hline
	\end{tabular}
\end{table}

\subsection{Test B-const-2}
In test B-const-2, both a \texttt{source} and \texttt{reactor} facility is present in the test scenario. Table \ref{tab:test-B-const-2} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-B-const-2ana} shows the expected analytical solution based on the test scenario. Table \ref{tab:test-B-const-2base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 

\begin{table}[H]
	\centering
	\caption{Test B-const-2 Scenario Input Parameters }
	\label{tab:test-B-const-2}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 1 & \#\\
		Growth Rate & 0 &  \\
		\hline
		\textbf{Reactor Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & MW \\
		Initial facilities & 1 & \#\\
		Growth Rate & 0 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-const-2 Analytical Solution}
	\label{tab:test-B-const-2ana}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 & 1 & 1\\
		2 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-const-2 Base Test Acceptance}
	\label{tab:test-B-const-2base}
	\begin{tabular}{|P{6.5cm}|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}} &\textbf{\shortstack{Acceptable total No. of Reactor \\Facilities Deployed + tolerance}}\\
		\hline
		1 $<$ x $<$ 2 & 1 $<$ x $<$ 2\\
		\hline
	\end{tabular}
\end{table}

\subsection{Test B-grow-1}
In test B-grow-1, both a \texttt{source} and \texttt{reactor} facility is present in the test scenario. Table \ref{tab:test-B-grow-1} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-B-grow-1ana} shows the expected analytical solution based on the test scenario. Table \ref{tab:test-B-grow-1base} shows the accepted range of total number of facilities deployed over the test scenario which will pass the base test, which factors in the facility over-prediction tolerance of 1. 


\begin{table}[H]
	\centering
	\caption{Test B-grow-1 Scenario Input Parameters }
	\label{tab:test-B-grow-1}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 0 & \#\\
		Growth Rate & 1 &  \\
		\hline
		\textbf{Reactor Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & MW \\
		Initial facilities & 0 & \#\\
		Growth Rate & 1 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-grow-1 Analytical Solution}
	\label{tab:testB-grow-1ana}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 & 2 & 2\\
		2 to 12 & 0 & 0\\
		13 & 1 & 1\\
		14 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test B-grow-1 Base Test Acceptance}
	\label{tab:test-B-grow-1base}
	\begin{tabular}{|P{6.5cm}|P{6.5cm}|}
		\hline
		\textbf{\shortstack{Acceptable total No. of Source \\Facilities Deployed + tolerance}} &\textbf{\shortstack{Acceptable total No. of Reactor \\Facilities Deployed + tolerance}}\\
		\hline
		3 $<$ x $<$ 4 & 3 $<$ x $<$ 4\\
		\hline
	\end{tabular}
\end{table}

\subsection{Test A-const-3}
In test A-const-3, only a \texttt{source} facility is present in the test scenario. Table \ref{tab:test-A-const-3} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-A-const-3ana} shows the expected analytical solution based on the test scenario. 

\begin{table}[H]
	\centering
	\caption{Test A-const-3 Scenario Input Parameters }
	\label{tab:test-A-const-3}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 0 & kg \\
		Initial facilities & 1 & \#\\
		Growth Rate & 0 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-const-3 Analytical Solution}
	\label{tab:test-A-const-3ana}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}& \textbf{\shortstack{No. of Source \\Facilities Decomissioned}}\\
		\hline
		1 & 1 & 0\\
		2 & 0 & 1\\
		3 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\subsection{Test A-decl-1}
In test A-decl-1, only a \texttt{source} facility is present in the test scenario. Table \ref{tab:test-A-decl-1} shows the input parameters of the source facility in the test scenario. Table \ref{tab:test-A-decl-1ana} shows the expected analytical solution based on the test scenario.

\begin{table}[H]
	\centering
	\caption{Test A-decl-1 Scenario Input Parameters }
	\label{tab:test-A-decl-1}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Source Parameter} & \textbf{Value} & \textbf{Units} \\
		\hline
		Initial demand & 1 & kg \\
		Initial facilities & 1 & \#\\
		Growth Rate & -1 &  \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[H]
	\centering
	\caption{Test A-decl-1 Analytical Solution}
	\label{tab:test-A-decl-1ana}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}& \textbf{\shortstack{No. of Source \\Facilities Decomissioned}}\\
		\hline
		1 to 12 & 1 & 0\\
		13 & 0 & 1\\
		14 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\section{Numerical Test Results}
It was found that none of the exact tests and base case tests passed. 
The failures are attributed to three reasons:

\begin{enumerate}
	\item There is a test failure when there is no initial facility present. An initial condition must be given for the algorithm to understand the capacity of the facility it deploys.
	\item There is a test failure when there is growth in the demand. The algorithm failed to deploy facilities to meet the increase in demand.
	\item There is a test failure when facilities are expected to be decommissioned. There is yet to be an implementation on decommissioning behavior.
\end{enumerate}

Despite failures in these situations, the non-optimizing method proved to have commissioning capabilities
to meet demand. Because of the limitation in the algorithm, it is hard to predict demand with precision
in such a short time. However, the same numerical experiments can be applied to the deterministic
optimizing algorithm, which holds more promise. The goal is that the deterministic optimization method
will be able to overcome the issues faced by the non-optimizing method with reference to the
requirement of an initial condition, growth in demand. Also, the capability to decommission facilities
upon oversupply will be added.

Appendix C reflects the numerical experiment solution output by the non-optimizing prediction algorithm for each test scenario defined in section 6. 

\pagebreak

\section{References}
\bibliography{bibliography}

\pagebreak

\section*{Appendix A - parameter configuration}
Appendix A shows the json file that contains the simulation parameters that are common between all the test scenarios discussed in Section 6.  

\begin{minted}{json}
template = {
"simulation": {
"archetypes": {
"spec": [
{"lib": "agents", "name": "NullRegion"}, 
{"lib": "cycamore", "name": "Source"}, 
{"lib": "cycamore", "name": "Reactor"},
{"lib": "cycamore", "name": "Sink"},
{"lib": "d3ploy.no_inst", "name": "NOInst"}
]
}, 
"control": {"duration": "15", "startmonth": "1", "startyear": "2000"}, 
"recipe": [
{
"basis": "mass", 
"name": "fresh_uox", 
"nuclide": [{"comp": "0.711", "id": "U235"}, {"comp": "99.289", "id": "U238"}]
}, 
{
"basis": "mass", 
"name": "spent_uox", 
"nuclide": [{"comp": "50", "id": "Kr85"}, {"comp": "50", "id": "Cs137"}]
}
], 
"facility": [{
"config": {"Source": {"outcommod": "fuel",
"outrecipe": "fresh_uox",
"throughput": "1",
"source_record_supply": "fuel"}}, 
"name": "source"
},
{
"config": {"Sink": {"in_commods": {"val":"spent_uox"},
"max_inv_size": 1,
"sink_record_demand": "fuel_cap"}}, 
"name": "sink"
},
{
"config": {
"Reactor":{
"assem_size":"1",
"cycle_time": "1", 
"fuel_incommods": {"val": "fuel"}, 
"fuel_inrecipes": {"val": "fresh_uox"}, 
"fuel_outcommods": {"val": "spent_uox"}, 
"fuel_outrecipes": {"val": "spent_uox"}, 
"n_assem_batch": "1", 
"n_assem_core": "1", 
"power_cap": "1", 
"refuel_time": "0",
"reactor_fuel_demand": "fuel_reactor"
}
},
"name": "reactor"
}]}}
\end{minted}

\pagebreak
\section*{Appendix B - Sample Test Code }
\subsection*{Sample test code for test A-const-1}
Appendix B shows the python file that contains the a segment of the simulation parameters that are unique to test A-const-1 and the code for test A-const-1. 
\begin{minted}{python}
# Test A_const_1
INIT_DEMAND = copy.deepcopy(TEMPLATE)
INIT_DEMAND["simulation"].update({"region": {
"config": {"NullRegion": "\n      "},
"institution": {
"config": {
"NOInst": {
"calc_method": "arma",
"demand_commod": "POWER",
"demand_std_dev": "0.0",
"growth_rate": "0.0",
"initial_demand": "1",
"prototypes": {"val": "source"},
"steps": "1",
"supply_commod": "fuel"
}
},
"name": "source_inst"
},
"name": "SingleRegion"
}})

@pytest.mark.base
def test_a1_init_demand():
# tests if NOInst deploys a source
# given initial demand and no initial facilities
output_file = 'init_file.sqlite'
input_file = output_file.replace('.sqlite', '.json')
with open(input_file, 'w') as f:
json.dump(INIT_DEMAND, f)
s = subprocess.check_output(['cyclus', '-o', output_file, input_file],
universal_newlines=True, env=ENV)
# check if ran successfully
assert("Cyclus run successful!" in s)

# getting the sqlite file
cur = get_cursor(output_file)

# check base solution
source_base = cur.execute(query).fetchone()
assert(1 <= source_base[0] <= (1 + tol))

@pytest.mark.exact
def test_a1_init_demand_exact():
output_file = 'init_file.sqlite'
cur = get_cursor(output_file)
# check exact solution
source_exact = cur.execute(query + " AND EnterTime = 1").fetchone()
assert(source_exact[0] == 1)
\end{minted}

\pagebreak

\section*{Appendix C - Numerical Experiment Solution for test scenarios}
\subsection*{Test A-const-1}
\begin{table}[H]
	\centering
	\caption{Test A-const-1 Numerical Experiment Solution}
	\label{tab:test-A-const-1num}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 to 15& 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test A-const-2}
\begin{table}[H]
	\centering
	\caption{Test A-const-2 Numerical Experiment Solution}
	\label{tab:test-A-const-2a2num}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 & 0\\
		2 & 1\\
		3 & 1\\
		4 & 1 \\
		5 & 0 \\
		6 & 1 \\
		7 to 15 & 0 \\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test A-grow-1}
\begin{table}[H]
	\centering
	\caption{Test A-grow-1 Numerical Experiment Solution}
	\label{tab:test-A-grow-1num}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 to 15& 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test A-grow-2}
\begin{table}[H]
	\centering
	\caption{Test A-grow-2 Numerical Experiment Solution}
	\label{tab:test-A-grow-2num}
	\begin{tabular}{|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}\\
		\hline
		1 to 15& 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test B-const-1}
\begin{table}[H]
	\centering
	\caption{Test B-const-1 Numerical Experiment Solution}
	\label{tab:test-B-const-1num}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test B-const-2}
\begin{table}[H]
	\centering
	\caption{Test B-const-2 Numerical Experiment Solution}
	\label{tab:test-B-const-2num}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 & 0 & 0\\
		2 & 1 & 0\\
		3 & 1 & 0\\
		4 & 1 & 0\\
		5 & 0 & 0\\
		6 & 1 & 0\\
		7 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test B-grow-1}
\begin{table}[H]
	\centering
	\caption{Test B-grow-1 Numerical Experiment Solution}
	\label{tab:test-B-grow-1num}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}} & \textbf{\shortstack{No. of Reactor \\Facilities Deployed}}\\
		\hline
		1 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test A-const-3}
\begin{table}[H]
	\centering
	\caption{Test A-const-3 Numerical Experiment Solution}
	\label{tab:test-A-const-3num}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}& \textbf{\shortstack{No. of Source \\Facilities Decomissioned}}\\
		\hline
		1 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\subsection*{Test A-decl-1}
\begin{table}[H]
	\centering
	\caption{Test A-decl-1 Numerical Experiment Solution}
	\label{tab:test-A-decl-1num}
	\begin{tabular}{|l|l|l|}
		\hline
		\textbf{Time Step} & \textbf{\shortstack{No. of Source \\Facilities Deployed}}& \textbf{\shortstack{No. of Source \\Facilities Decomissioned}}\\
		\hline
		1 to 15 & 0 & 0\\
		\hline
	\end{tabular}
\end{table}

\end{document}



